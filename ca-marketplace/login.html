<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' https://buy.stripe.com https://billing.stripe.com; frame-src https://buy.stripe.com">
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta name="referrer" content="strict-origin-when-cross-origin">
<title>serlf.ca â€” Log In</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0a0e1a;color:#e0e4ef;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;min-height:100vh;display:flex;align-items:center;justify-content:center}
.login-container{max-width:420px;width:100%;padding:2rem}
.logo{font-size:2rem;font-weight:700;color:#ff6b6b;text-align:center;margin-bottom:.5rem}
.tagline{text-align:center;color:#8892b0;margin-bottom:2.5rem;font-size:1.2rem}
.form-group{margin-bottom:1.25rem}
label{display:block;color:#8892b0;font-size:.85rem;margin-bottom:.4rem;text-transform:uppercase;letter-spacing:.05em}
input{width:100%;padding:.85rem 1rem;background:#151b2e;border:1px solid #2a3050;border-radius:8px;color:#e0e4ef;font-size:1rem;transition:border .2s}
input:focus{outline:none;border-color:#ff6b6b}
.submit-btn{width:100%;padding:1rem;background:#ff6b6b;color:#fff;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;margin-top:.5rem;transition:all .2s}
.submit-btn:hover{background:#ff5252;transform:translateY(-1px)}
.signup-link{text-align:center;margin-top:1.5rem;color:#8892b0}
.signup-link a{color:#ff6b6b;text-decoration:none}
.error{color:#ff4444;text-align:center;margin-top:1rem;display:none}
.specialist-bubble{background:#151b2e;border:1px solid #2a3050;border-radius:12px;padding:1rem;margin-top:2rem;text-align:center}
.specialist-bubble .avatar{font-size:2rem;margin-bottom:.5rem}
.specialist-bubble .msg{color:#8892b0;font-size:.9rem;font-style:italic}
</style>
</head>
<body>
<div class="login-container">
  <div class="logo">serlf.ca</div>
  <p class="tagline">Welcome back, meek.</p>

  <div class="form-group">
    <label>Email</label>
    <input type="email" id="email" placeholder="you@example.com" autofocus>
  </div>
  <button class="submit-btn" onclick="doLogin()">Enter Marketplace</button>
  <div class="error" id="error">No account found. <a href="signup.html" style="color:#ff6b6b">Sign up?</a></div>

  <div class="signup-link">New here? <a href="signup.html">Sign up for $1</a></div>

  <div class="specialist-bubble">
    <div class="avatar">ðŸ§­</div>
    <div class="msg">Your specialist is sleeping... waiting for you to return.</div>
  </div>
</div>

<script src="../shared/auth.js"></script>
<script>
if (SerlfAuth.isLoggedIn()) window.location.href = 'my-marketplace.html';

function doLogin() {
  const email = document.getElementById('email').value.trim();
  if (!email) return;
  const user = SerlfAuth.login(email);
  if (user) {
    window.location.href = 'my-marketplace.html';
  } else {
    document.getElementById('error').style.display = 'block';
  }
}
document.getElementById('email').addEventListener('keydown', e => { if (e.key === 'Enter') doLogin(); });
</script>
</body>
</html>
